<app-header></app-header>

<ion-content class="ion-padding">
  <div class="contenedor-pago">

    <!-- PRECIO -->
    <div class="precio-card">
      <h2>El precio del evento seleccionado es de</h2>
      <h1 class="precio">{{ evento?.precio | currency:'EUR' }}</h1>
    </div>

    <!-- MÉTODOS -->
    <ion-card class="metodos-card">
      <ion-card-header>
        <ion-card-title>Método de pago</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-radio-group [(ngModel)]="metodoSeleccionado">
          <ion-item lines="none" class="metodo-item" (click)="seleccionar('tarjeta')">
            <ion-radio value="tarjeta" slot="start"></ion-radio>
            <ion-icon name="card-outline" class="icono-metodo"></ion-icon>
            <ion-label>Pago con tarjeta</ion-label>
          </ion-item>

          <ion-item lines="none" class="metodo-item" (click)="seleccionar('google')">
            <ion-radio value="google" slot="start"></ion-radio>
            <div class="icono-metodo">
              <img src="https://developers.google.com/static/pay/api/images/brand-guidelines/google-pay-mark.svg" width="50">
            </div>
            <ion-label>Google Pay</ion-label>
          </ion-item>

          <ion-item lines="none" class="metodo-item" (click)="seleccionar('apple')">
            <ion-radio value="apple" slot="start"></ion-radio>
            <div class="icono-metodo">
              <ion-icon name="logo-apple" size="large"></ion-icon>
            </div>
            <ion-label>Apple Pay</ion-label>
          </ion-item>

          <ion-item lines="none" class="metodo-item" (click)="seleccionar('paypal')">
            <ion-radio value="paypal" slot="start"></ion-radio>
            <div class="icono-metodo">
              <img src="https://www.paypalobjects.com/webstatic/mktg/merchant_portal/images/paypal-logo.svg" width="60">
            </div>
            <ion-label>PayPal</ion-label>
          </ion-item>
        </ion-radio-group>
      </ion-card-content>
    </ion-card>

    <!-- FORMULARIO TARJETA -->
    <div *ngIf="metodoSeleccionado === 'tarjeta'" class="formulario-tarjeta">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Información de la Tarjeta</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-item>
            <ion-label position="stacked">Número de Tarjeta</ion-label>
            <ion-input placeholder="1234 5678 9012 3456" [(ngModel)]="tarjeta.numero"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">Fecha (MM/AA)</ion-label>
            <ion-input placeholder="12/26" [(ngModel)]="tarjeta.fecha"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="stacked">CVV</ion-label>
            <ion-input placeholder="123" type="password" [(ngModel)]="tarjeta.cvv"></ion-input>
          </ion-item>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- BOTONES -->
    <div class="botones-accion">
      <ion-button expand="block" fill="outline" color="medium" (click)="cancelar()">
        <ion-icon name="close-outline" slot="start"></ion-icon>
        Cancelar
      </ion-button>
      <ion-button expand="block" color="success" (click)="pagar()" [disabled]="!metodoSeleccionado">
        <ion-icon name="card-outline" slot="start"></ion-icon>
        Pagar {{ evento?.precio | currency:'EUR' }}
      </ion-button>
    </div>

  </div>
  <!-- AL FINAL DEL ion-content -->
  <ion-loading
    #loadingPago
    message="Procesando pago..."
    spinner="crescent"
    [duration]="0"
    [isOpen]="mostrarLoading">
  </ion-loading>

  <ion-toast
    #toastExito
    message="¡Pago exitoso! Has sido inscrito."
    color="success"
    duration="3000"
    position="top"
    [buttons]="[{ text: 'OK', role: 'cancel' }]">
  </ion-toast>
</ion-content>
<app-footer></app-footer>
